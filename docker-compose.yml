version: "3.8"

services:
  # üß† MQTT Broker
  mqtt:
    image: eclipse-mosquitto:2
    container_name: mqtt
    ports:
      - "1883:1883"
      - "9001:9001"
    volumes:
      - ./mosquitto.conf:/mosquitto/config/mosquitto.conf
    restart: always

  # üí° openHAB (‡πÉ‡∏ä‡πâ image ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏°‡∏µ Java ‡πÅ‡∏•‡πâ‡∏ß)
  openhab:
    image: openhab/openhab:4.2.0
    container_name: openhab
    restart: unless-stopped
    # ‚ùó ‡∏≠‡∏¢‡πà‡∏≤‡πÉ‡∏ä‡πâ network_mode: host ‡∏ö‡∏ô Render ‡∏´‡∏£‡∏∑‡∏≠ VPS ‡πÄ‡∏î‡πá‡∏î‡∏Ç‡∏≤‡∏î
    # ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏±‡∏ô‡∏à‡∏∞‡∏ä‡∏ô‡∏Å‡∏±‡∏ö‡∏û‡∏≠‡∏£‡πå‡∏ï‡∏Ç‡∏≠‡∏á container ‡∏≠‡∏∑‡πà‡∏ô
    ports:
      - "8080:8080"
      - "8443:8443"
    environment:
      USER_ID: "9001"
      GROUP_ID: "9001"
      TZ: "Asia/Bangkok"
    volumes:
      - ./openhab_addons:/openhab/addons
      - ./openhab_conf:/openhab/conf
      - ./openhab_user:/openhab/userdata

  # üíæ MongoDB (‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)
  mongodb:
    image: mongo:7.0
    container_name: mongodb
    ports:
      - "27017:27017"
    volumes:
      - ./mongodb_data:/data/db
    restart: always
